import{u as I,r as N,j as e,H as D}from"./app-_SHXlIMi.js";import{T as P}from"./tiptap-pOzmqHF-.js";import{I as r}from"./input-error-BGG48Xue.js";import{B as T}from"./button-D90eb9uh.js";import{I as p}from"./input-if9ZDulC.js";import{L as c}from"./label-BbDwcLxf.js";import{S as u,a as x,b as h,c as j,d as m}from"./select-Bp_w2N4Y.js";import{S as E}from"./switch-Dlle7-ja.js";import{T as L}from"./textarea-DZMdTmRK.js";import{A as V}from"./AuthenticatedLayout-CPCLZqyP.js";/* empty css            */import"./index-CNvgb3hZ.js";import"./index-Ri9twfyI.js";import"./floating-ui.react-dom-DzZXuo7M.js";import"./index-BdQq_4o_.js";import"./index-CE-JyWoC.js";import"./index-DxYDQp86.js";import"./createLucideIcon-Cxr0x7Gx.js";import"./index-B0THvyZM.js";import"./app-layout-DwKOLOaJ.js";import"./use-mobile-BmM3Cx0C.js";import"./index-DYWYdy9I.js";import"./briefcase-3h3coz6E.js";import"./users-DG3kscKL.js";import"./user-DwfZl6oT.js";import"./chevron-right-B9kvcExf.js";import"./chevron-down-Du6pogeH.js";import"./check-BHjU2Kck.js";import"./chevron-up-BSzItXW_.js";const q=d=>d.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-");function de({auth:d,clients:C,users:A,categories:S}){const{data:t,setData:a,post:w,processing:f,errors:i,reset:y}=I({title:"",description:"",doc:"",image:null,location:"",complete:"",slug:"",status:!0,type:"",category:"",clientId:"",post_by:d.user?String(d.user.id):""}),[v,g]=N.useState(null);N.useEffect(()=>{t.title&&a("slug",q(t.title))},[t.title]);const F=s=>{const o=s.target.files?.[0]||null;if(a("image",o),o){const l=new FileReader;l.onloadend=()=>{g(l.result)},l.readAsDataURL(o)}else g(null)},b=s=>{s.preventDefault();const o=new FormData;Object.entries(t).forEach(([l,n])=>{l==="image"?n instanceof File&&o.append(l,n):l==="status"?o.append(l,n?"1":"0"):l==="category"||l==="clientId"?o.append(l,String(n)):n!=null&&o.append(l,n)}),console.log("Data being sent:",Object.fromEntries(o.entries())),w(route("admin.projects.store"),{data:o,onSuccess:()=>{y(),g(null)},forceFormData:!0})};return e.jsxs(V,{user:d.user,header:e.jsx("h2",{className:"text-xl leading-tight font-semibold",children:"Create Project"}),children:[e.jsx(D,{title:"Create Project"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden p-6 shadow-sm sm:rounded-lg",children:e.jsxs("form",{onSubmit:b,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"title",children:"Title"}),e.jsx(p,{id:"title",type:"text",name:"title",value:t.title,className:"mt-1 block w-full",autoComplete:"title",onChange:s=>a("title",s.target.value),required:!0}),e.jsx(r,{message:i.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(L,{id:"description",name:"description",value:t.description,className:"mt-1 block w-full",onChange:s=>a("description",s.target.value),required:!0,rows:5}),e.jsx(r,{message:i.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Project Details"}),e.jsx(P,{onChange:s=>a("doc",s||""),description:t.doc||""}),e.jsx(r,{message:i.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"image",children:"Image"}),e.jsx(p,{id:"image",type:"file",name:"image",className:"mt-1 block w-full",onChange:F,accept:"image/*",required:!0}),e.jsx(r,{message:i.image,className:"mt-2"}),v&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:v,alt:"Image Preview",className:"h-auto max-w-xs rounded-md"})})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"location",children:"Location"}),e.jsx(p,{id:"location",type:"text",name:"location",value:t.location,className:"mt-1 block w-full",onChange:s=>a("location",s.target.value)}),e.jsx(r,{message:i.location,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"complete",children:"Completion Status"}),e.jsxs(u,{onValueChange:s=>a("complete",s),value:t.complete,children:[e.jsx(x,{className:"w-full",children:e.jsx(h,{placeholder:"Select completion status"})}),e.jsxs(j,{children:[e.jsx(m,{value:"on-going",children:"On-going"}),e.jsx(m,{value:"completed",children:"Completed"})]})]}),e.jsx(r,{message:i.complete,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"slug",children:"Slug"}),e.jsx(p,{id:"slug",type:"text",name:"slug",value:t.slug,className:"mt-1 block w-full",onChange:s=>a("slug",s.target.value),required:!0}),e.jsx(r,{message:i.slug,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"status",checked:t.status,onCheckedChange:s=>a("status",s)}),e.jsx(c,{htmlFor:"status",children:"Status (Active/Inactive)"}),e.jsx(r,{message:i.status,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"type",children:"Type"}),e.jsxs(u,{onValueChange:s=>a("type",s),value:t.type,children:[e.jsx(x,{className:"w-full",children:e.jsx(h,{placeholder:"Select a type"})}),e.jsxs(j,{children:[e.jsx(m,{value:"project",children:"Project"}),e.jsx(m,{value:"case_study",children:"Case Study"})]})]}),e.jsx(r,{message:i.type,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"category",children:"Category"}),e.jsxs(u,{onValueChange:s=>a("category",s),value:t.category,children:[e.jsx(x,{className:"w-full",children:e.jsx(h,{placeholder:"Select a category"})}),e.jsx(j,{children:S.map(s=>e.jsx(m,{value:String(s.id),children:s.name},s.id))})]}),e.jsx(r,{message:i.category,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"clientId",children:"Client"}),e.jsxs(u,{onValueChange:s=>a("clientId",s),value:t.clientId,children:[e.jsx(x,{className:"w-full",children:e.jsx(h,{placeholder:"Select a client"})}),e.jsx(j,{children:C.map(s=>e.jsx(m,{value:String(s.id),children:s.name},s.id))})]}),e.jsx(r,{message:i.clientId,className:"mt-2"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(T,{type:"submit",disabled:f,children:f?"Creating...":"Create Project"})})]})})})})]})}export{de as default};
