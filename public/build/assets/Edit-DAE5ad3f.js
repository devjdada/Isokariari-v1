import{u as w,r as x,j as e,H as b,a as h}from"./app-DyEdge20.js";import{T as C}from"./tiptap-CHWGIlXS.js";import{I as n}from"./input-error-CZJ0h1nX.js";import{B as y}from"./button-D3OwELb8.js";import{I as j}from"./input-Dg2rZCGI.js";import{L as c}from"./label-9SEmRnGX.js";import{S as F,a as I,b as E,c as _,d as D}from"./select-RfRdo1bb.js";import{S as L}from"./switch-B22-Cb9n.js";import{A as T}from"./AuthenticatedLayout-C7gs0gXC.js";/* empty css            */import"./index-DDBZ5q__.js";import"./index-czFNS7T5.js";import"./floating-ui.react-dom-Bl6OpAys.js";import"./index-BdQq_4o_.js";import"./index-BXIrDaaF.js";import"./index-Df_DPcC1.js";import"./createLucideIcon-CFm_GpvR.js";import"./index-Y-IrRGzS.js";import"./app-layout-DTN2oy7H.js";import"./use-mobile-DGsOrUmJ.js";import"./index-CT9GOt-K.js";import"./briefcase-iNO2qAEL.js";import"./users--YiqIZUM.js";import"./user-B7MtQJ5V.js";import"./chevron-right-BCyvHIkz.js";import"./chevron-down-DZvbY19g.js";import"./check-9b4_iUtg.js";import"./chevron-up-Djxqdry3.js";const U=d=>d.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-");function ce({auth:d,service:i,categories:f}){const{data:a,setData:l,post:A,processing:p,errors:o,reset:P}=w({title:i.title,slug:i.slug,description:i.description,image:null,status:i.status==="1",category_id:String(i.category_id)}),S=i.image?`/storage/${i.image}`:null,[u,g]=x.useState(S);x.useEffect(()=>{a.title&&l("slug",U(a.title))},[a.title]);const v=t=>{const r=t.target.files?.[0]||null;if(l("image",r),r){const s=new FileReader;s.onloadend=()=>{g(s.result)},s.readAsDataURL(r)}else g(null)},N=t=>{t.preventDefault();const r=new FormData;Object.entries(a).forEach(([s,m])=>{s==="image"&&m===null||(s==="status"?r.append(s,m?"1":"0"):m!=null&&r.append(s,m))}),r.append("_method","PUT"),h.post(route("admin.services.update",i.id),r,{onSuccess:()=>{h.visit(route("admin.services.index"))},onError:s=>{console.error("Form submission errors:",s)}})};return e.jsxs(T,{user:d.user,header:e.jsx("h2",{className:"text-xl leading-tight font-semibold text-gray-800",children:"Edit Service"}),children:[e.jsx(b,{title:"Edit Service"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-card p-6 shadow-sm sm:rounded-lg",children:e.jsxs("form",{onSubmit:N,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"title",children:"Title"}),e.jsx(j,{id:"title",type:"text",name:"title",value:a.title,className:"mt-1 block w-full",autoComplete:"title",onChange:t=>l("title",t.target.value),required:!0}),e.jsx(n,{message:o.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(C,{description:a.description,onChange:t=>l("description",t)}),e.jsx(n,{message:o.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"image",children:"Image"}),e.jsx(j,{id:"image",type:"file",name:"image",className:"mt-1 block w-full",onChange:v,accept:"image/*"}),e.jsx(n,{message:o.image,className:"mt-2"}),u&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:u,alt:"Image Preview",className:"h-auto max-w-xs rounded-md"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{id:"status",checked:a.status,onCheckedChange:t=>l("status",t)}),e.jsx(c,{htmlFor:"status",children:"Status (Active/Inactive)"}),e.jsx(n,{message:o.status,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"category_id",children:"Category"}),e.jsxs(F,{onValueChange:t=>l("category_id",t),value:a.category_id,children:[e.jsx(I,{className:"w-full",children:e.jsx(E,{placeholder:"Select a category"})}),e.jsx(_,{children:f.map(t=>e.jsx(D,{value:String(t.id),children:t.name},t.id))})]}),e.jsx(n,{message:o.category_id,className:"mt-2"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(y,{type:"submit",disabled:p,children:p?"Saving...":"Save Changes"})})]})})})})]})}export{ce as default};
