import{u as P,r as S,j as e,H as I,a as C}from"./app-ikZaHAeh.js";import{I as m}from"./input-error-CTgsu7Tr.js";import{B as u}from"./button-CuPzQEo1.js";import{I as x}from"./input-Dl0zFxrs.js";import{L as c}from"./label-W5pDfIJK.js";import{S as D,a as F,b as U,c as A,d}from"./select-BiHVv5bt.js";import{A as E}from"./AuthenticatedLayout-CRa6ylw_.js";import{C as L}from"./circle-plus-DN7Rpp49.js";import{T as k}from"./trash-2-ovDB69Lk.js";/* empty css            */import"./index-DAnG4KlX.js";import"./index-BdQq_4o_.js";import"./index-DUzO91nk.js";import"./index-C6nWi0Bi.js";import"./createLucideIcon-Cj1hmbng.js";import"./floating-ui.react-dom-CbTUF4yy.js";import"./index-Ncwpqk6S.js";import"./app-layout-DuJoi0FZ.js";import"./use-mobile-B9xFdgbH.js";import"./index-DbiaGNIM.js";import"./index-BhTzi93d.js";import"./briefcase-DsdAm3s8.js";import"./users-BoWPtOvO.js";import"./user-0xmYekUr.js";import"./chevron-right-JRmTy2xe.js";import"./chevron-down-BsAxhN19.js";import"./check-9OvN1Rti.js";import"./chevron-up-DYoOISwH.js";function ce({auth:j,photos:n}){const{data:p,setData:t,post:f,processing:h,errors:a,reset:v}=P({gallery:"",images:[],description:""}),[g,i]=S.useState([]),N=s=>{const r=Array.from(s.target.files||[]);if(t("images",r),r.length>0){const l=[];r.forEach(b=>{const o=new FileReader;o.onloadend=()=>{l.push(o.result),l.length===r.length&&i(l)},o.readAsDataURL(b)})}else i([])},y=s=>{s.preventDefault(),f(route("admin.photos.store"),{onSuccess:()=>{v(),i([])},forceFormData:!0})},w=s=>{confirm("Are you sure you want to delete this photo?")&&C.delete(route("admin.photos.destroy",s))};return e.jsxs(E,{user:j.user,header:e.jsx("h2",{className:"text-xl leading-tight font-semibold text-gray-800",children:"Manage Photos"}),children:[e.jsx(I,{title:"Manage Photos"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsxs("div",{className:"overflow-hidden bg-card p-6 shadow-sm sm:rounded-lg",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium",children:"Upload New Photo"}),e.jsxs("form",{onSubmit:y,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"gallery",children:"Gallery (Optional)"}),e.jsxs(D,{value:p.gallery||"",onValueChange:s=>t("gallery",s),children:[e.jsx(F,{className:"w-full",children:e.jsx(U,{placeholder:"Select a gallery"})}),e.jsxs(A,{children:[e.jsx(d,{value:"careers",children:"Careers"}),e.jsx(d,{value:"history",children:"History"}),e.jsx(d,{value:"others",children:"Others"})]})]}),e.jsx(m,{message:a.gallery,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(x,{id:"description",type:"text",name:"description",value:p.description||"",className:"mt-1 block w-full",onChange:s=>t("description",s.target.value)}),e.jsx(m,{message:a.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"image",children:"Images"}),e.jsx(x,{id:"image",type:"file",name:"images[]",className:"mt-1 block w-full",onChange:N,accept:"image/*",multiple:!0}),e.jsx(m,{message:a.images,className:"mt-2"}),g.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4",children:g.map((s,r)=>e.jsx("img",{src:s,alt:"Image Preview",className:"h-32 w-full rounded-md object-cover"},r))})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(u,{type:"submit",disabled:h,children:[e.jsx(L,{className:"mr-2 h-4 w-4"})," ",h?"Uploading...":"Upload Photo"]})})]}),e.jsx("h3",{className:"mt-8 mb-4 text-lg font-medium",children:"Existing Photos"}),n.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4",children:n.map(s=>e.jsxs("div",{className:"group relative",children:[e.jsx("img",{src:s.image,alt:s.description||"Photo",className:"h-32 w-full rounded-md object-cover"}),e.jsx(u,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 opacity-0 transition-opacity group-hover:opacity-100",onClick:()=>w(s.id),children:e.jsx(k,{className:"h-4 w-4"})})]},s.id))}):e.jsx("p",{children:"No photos found."})]})})})]})}export{ce as default};
